# NodePort Services for External Access from EC2
# These services expose the microservices outside the cluster
# NodePort range: 30000-32767

---
apiVersion: v1
kind: Service
metadata:
  name: user-service-nodeport
  namespace: salon-booking
  labels:
    app: user-service
spec:
  type: NodePort
  ports:
    - port: 8001
      targetPort: 8001
      nodePort: 30001 # Access via <EC2-IP>:30001
      protocol: TCP
      name: http
  selector:
    app: user-service

---
apiVersion: v1
kind: Service
metadata:
  name: service-management-nodeport
  namespace: salon-booking
  labels:
    app: service-management
spec:
  type: NodePort
  ports:
    - port: 8002
      targetPort: 8002
      nodePort: 30002 # Access via <EC2-IP>:30002
      protocol: TCP
      name: http
  selector:
    app: service-management

---
apiVersion: v1
kind: Service
metadata:
  name: staff-service-nodeport
  namespace: salon-booking
  labels:
    app: staff-service
spec:
  type: NodePort
  ports:
    - port: 8003
      targetPort: 8003
      nodePort: 30003 # Access via <EC2-IP>:30003
      protocol: TCP
      name: http
  selector:
    app: staff-service

---
apiVersion: v1
kind: Service
metadata:
  name: appointment-service-nodeport
  namespace: salon-booking
  labels:
    app: appointment-service
spec:
  type: NodePort
  ports:
    - port: 8004
      targetPort: 8004
      nodePort: 30004 # Access via <EC2-IP>:30004
      protocol: TCP
      name: http
  selector:
    app: appointment-service

---
apiVersion: v1
kind: Service
metadata:
  name: reports-service-nodeport
  namespace: salon-booking
  labels:
    app: reports-service
spec:
  type: NodePort
  ports:
    - port: 8005
      targetPort: 8005
      nodePort: 30005 # Access via <EC2-IP>:30005
      protocol: TCP
      name: http
  selector:
    app: reports-service

---
apiVersion: v1
kind: Service
metadata:
  name: notification-service-nodeport
  namespace: salon-booking
  labels:
    app: notification-service
spec:
  type: NodePort
  ports:
    - port: 8006
      targetPort: 8006
      nodePort: 30006 # Access via <EC2-IP>:30006
      protocol: TCP
      name: http
  selector:
    app: notification-service
